#!/bin/sh
# Get volume of microphone

string='MIC'
vol_muted='M'

get_volume() {
    is_muted=$(pactl get-source-mute @DEFAULT_SOURCE@)
    volume=$(pactl get-source-volume @DEFAULT_SOURCE@ | sed -E -n 's/.* ([0-9]+)(%).*/\1 \2/p')

    if [ "$is_muted" = "Mute: yes" ]; then
        echo "$string $vol_muted"
    else
        echo "$string $volume"
    fi
}

get_volume
