#!/bin/sh
# Get volume of microphone

string="MIC"
vol_muted="M"

get_volume() {
    volume=$(pactl get-source-volume @DEFAULT_SOURCE@ | sed -E -n "s/.* ([0-9]+)(%).*/\1 \2/p")

    case "$(pactl get-source-mute @DEFAULT_SOURCE@)" in
        *yes*)
            printf "%s %s\n" "$string" "$vol_muted"
            ;;
        *no*)
            printf "%s %s\n" "$string" "$volume"
            ;;
    esac
}

get_volume
